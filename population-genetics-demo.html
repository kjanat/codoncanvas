<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Population Genetics Simulator - CodonCanvas</title>
    <link rel="stylesheet" href="css/population-genetics-demo.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ðŸ§¬ Population Genetics Simulator</h1>
        <p>Observe genetic drift and evolutionary divergence in real-time</p>
      </header>

      <div class="content">
        <div class="intro">
          <h2>About This Simulation</h2>
          <p>
            Start with a population of <strong>identical genomes</strong> and
            watch them <strong>diverge</strong>
            through random mutations over generations. This demonstrates
            fundamental concepts in population genetics:
          </p>
          <ul style="margin: 10px 0 10px 30px">
            <li>
              <strong>Genetic Drift:</strong> Random changes in allele
              frequencies between generations
            </li>
            <li>
              <strong>Mutation Accumulation:</strong> How populations accumulate
              genetic differences over time
            </li>
            <li>
              <strong>Divergent Evolution:</strong> How identical ancestors
              produce varied descendants
            </li>
            <li>
              <strong>Fitness Landscapes:</strong> How different mutations
              affect phenotypic outcomes
            </li>
          </ul>
        </div>

        <div class="controls">
          <div class="control-group">
            <label>Founder Genome (all organisms start with this):</label>
            <textarea id="founderGenome">ATG GAA CCC GGA TAA</textarea>
          </div>

          <div class="control-group">
            <label>Population Parameters:</label>
            <div class="control-row">
              <div>
                <label
                  for="popSize"
                  style="font-weight: normal; font-size: 13px"
                >Population Size:</label>
                <input type="number" id="popSize" min="2" max="12" value="6" />
              </div>
              <div>
                <label
                  for="mutationRate"
                  style="font-weight: normal; font-size: 13px"
                >Mutation Rate (%):</label>
                <input
                  type="number"
                  id="mutationRate"
                  min="0"
                  max="100"
                  value="15"
                  step="5"
                />
              </div>
              <div>
                <label
                  for="generationDelay"
                  style="font-weight: normal; font-size: 13px"
                >Generation Delay (ms):</label>
                <input
                  type="number"
                  id="generationDelay"
                  min="100"
                  max="5000"
                  value="1000"
                  step="100"
                />
              </div>
            </div>
          </div>

          <div class="control-group">
            <label>Mutation Type Distribution:</label>
            <div class="control-row">
              <div>
                <label
                  for="mutationType"
                  style="font-weight: normal; font-size: 13px"
                >Type:</label>
                <select id="mutationType">
                  <option value="balanced">Balanced (all types)</option>
                  <option value="point-only">Point mutations only</option>
                  <option value="frameshift-heavy">Frameshift-heavy</option>
                  <option value="conservative">
                    Conservative (70% silent)
                  </option>
                </select>
              </div>
            </div>
          </div>

          <div class="button-group">
            <button id="startBtn">Start Simulation</button>
            <button id="pauseBtn" disabled>Pause</button>
            <button id="resetBtn">Reset Population</button>
            <button id="stepBtn">Single Generation</button>
          </div>
        </div>

        <div class="stats-panel">
          <h2 style="margin-bottom: 15px">Population Statistics</h2>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label">Current Generation</div>
              <div class="stat-value" id="currentGen">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Total Mutations</div>
              <div class="stat-value" id="totalMutations">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Genetic Diversity</div>
              <div class="stat-value" id="diversity">0%</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Unique Genomes</div>
              <div class="stat-value" id="uniqueGenomes">1</div>
            </div>
          </div>
        </div>

        <h2 style="margin-bottom: 20px">
          Population (Generation <span id="generationDisplay">0</span>)
        </h2>
        <div class="population-grid" id="populationGrid"></div>

        <div class="info-box">
          <h3>ðŸ’¡ Observation Tips</h3>
          <ul>
            <li>
              <strong>Watch for divergence:</strong> Identical starting genomes
              become visually distinct over generations
            </li>
            <li>
              <strong>Mutation types matter:</strong> Frameshift mutations cause
              dramatic phenotypic changes
            </li>
            <li>
              <strong>Genetic diversity increases:</strong> The "Unique Genomes"
              stat tracks how many distinct variants exist
            </li>
            <li>
              <strong>Some lineages fail:</strong> Nonsense mutations (early
              STOP) produce truncated phenotypes
            </li>
            <li>
              <strong>Try different rates:</strong> High mutation rates
              (&gt;30%) accelerate divergence, low rates (&lt;5%) show drift
            </li>
          </ul>
        </div>
      </div>

      <footer>
        <p>
          <strong>CodonCanvas Population Genetics Simulator</strong><br />
          Explore more demos:
          <a href="index.html">Playground</a> |
          <a href="mutation-demo.html">Mutation Lab</a> |
          <a href="evolution-demo.html">Evolution Lab</a> |
          <a href="timeline-demo.html">Timeline Scrubber</a>
        </p>
      </footer>
    </div>

    <script type="module" src="src/demos/population-genetics.ts"></script>
  </body>
</html>
