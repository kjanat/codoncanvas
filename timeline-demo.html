<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CodonCanvas - Timeline Scrubber Demo</title>
    <link rel="stylesheet" href="css/demo-base.css" />
    <link rel="stylesheet" href="css/timeline-demo.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ðŸ§¬ CodonCanvas Timeline Scrubber</h1>
        <div class="subtitle">
          Step-through execution visualization - watch your genome execute like
          a ribosome
        </div>
      </header>

      <div class="info-box">
        <h3>How to use:</h3>
        <p>
          1. Load an example or write your own genome<br />
          2. Click "Load & Execute" to process the genome<br />
          3. Use timeline controls to step through execution
          frame-by-frame<br />
          4. Watch the canvas update as each instruction executes<br />
          5. Observe the stack and current instruction in real-time
        </p>
      </div>

      <div id="status-container"></div>

      <div class="main-content">
        <div class="panel editor-section">
          <div class="panel-header">Genome Editor</div>
          <div class="panel-content">
            <div class="button-group">
              <button onclick="loadExample('helloCircle')">Hello Circle</button>
              <button onclick="loadExample('twoShapes')">Two Shapes</button>
              <button onclick="loadExample('colorfulPattern')">
                Colorful Pattern
              </button>
            </div>
            <textarea
              id="editor"
              placeholder="Enter genome here..."
            >
ATG GAA AAT GGA TAA</textarea>
            <div class="button-group">
              <button onclick="loadAndExecute()">ðŸš€ Load & Execute</button>
              <button class="secondary" onclick="clearCanvas()">
                Clear Canvas
              </button>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">Canvas Output</div>
          <div class="canvas-container">
            <canvas id="canvas" width="400" height="400"></canvas>
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">Timeline Controls</div>
          <div class="panel-content">
            <div id="timeline-container"></div>
          </div>
        </div>

        <!-- Share System Section -->
        <div class="panel" style="margin-top: 1rem">
          <div class="panel-header">Share & Export</div>
          <div class="panel-content">
            <div id="share-container"></div>
            <div
              class="button-group"
              style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #3e3e42"
            >
              <button onclick="exportGif()">ðŸ“¹ Export Animation as GIF</button>
              <select
                id="gif-fps"
                style="background: #3e3e42; color: #d4d4d4; border: 1px solid #505052; padding: 0.5rem; border-radius: 3px"
              >
                <option value="2">2 FPS</option>
                <option value="4" selected>4 FPS</option>
                <option value="6">6 FPS</option>
                <option value="8">8 FPS</option>
                <option value="10">10 FPS</option>
              </select>
              <select
                id="gif-quality"
                style="background: #3e3e42; color: #d4d4d4; border: 1px solid #505052; padding: 0.5rem; border-radius: 3px"
              >
                <option value="5">Best Quality (slow)</option>
                <option value="10" selected>Good Quality</option>
                <option value="20">Fast (lower quality)</option>
              </select>
            </div>
            <div
              id="gif-progress"
              style="display: none; margin-top: 0.75rem; padding: 0.75rem; background: #1e1e1e; border-radius: 4px; border: 1px solid #3e3e42"
            >
              <div style="color: #858585; font-size: 0.875rem; margin-bottom: 0.5rem">
                Encoding GIF...
              </div>
              <div style="background: #3e3e42; height: 20px; border-radius: 3px; overflow: hidden">
                <div
                  id="gif-progress-bar"
                  style="background: #0e639c; height: 100%; width: 0%; transition: width 0.3s"
                >
                </div>
              </div>
              <div
                id="gif-progress-text"
                style="color: #4ec9b0; font-size: 0.75rem; margin-top: 0.5rem"
              >
                0%
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="src/pages/timeline-demo-page.ts"></script>
  </body>
</html>
