<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CodonCanvas Achievements - Gamification Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .demo-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .demo-header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .demo-title {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 15px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .demo-subtitle {
      font-size: 20px;
      opacity: 0.95;
      margin-bottom: 20px;
    }

    .demo-description {
      font-size: 16px;
      opacity: 0.9;
      max-width: 800px;
      margin: 0 auto 30px;
      line-height: 1.6;
    }

    .content-card {
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      margin-bottom: 30px;
    }

    .action-section {
      margin-bottom: 40px;
    }

    .section-title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      color: #333;
    }

    .action-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .action-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 25px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .action-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .action-button:active {
      transform: translateY(0);
    }

    .action-button.secondary {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    .action-button.success {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    .action-button.warning {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }

    .info-box {
      background: #f5f7fa;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #667eea;
    }

    .info-box h4 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 18px;
    }

    .info-box p {
      color: #666;
      line-height: 1.6;
      margin-bottom: 8px;
    }

    .info-box code {
      background: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      color: #764ba2;
    }

    #achievements-container {
      margin-top: 40px;
    }

    .reset-button {
      background: #dc3545;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
    }

    .reset-button:hover {
      background: #c82333;
    }

    @media (max-width: 768px) {
      .demo-title {
        font-size: 32px;
      }

      .demo-subtitle {
        font-size: 18px;
      }

      .content-card {
        padding: 20px;
      }

      .action-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <div class="demo-header">
      <div class="demo-title">üèÜ CodonCanvas Achievements</div>
      <div class="demo-subtitle">Gamification System Demo</div>
      <div class="demo-description">
        This demo showcases the achievement system that rewards students for learning and practicing mutation concepts.
        Click the buttons below to simulate activities and unlock achievements!
      </div>
    </div>

    <div class="content-card">
      <div class="action-section">
        <div class="section-title">üß¨ Genome Activities</div>
        <div class="action-grid">
          <button class="action-button" onclick="simulateGenomeCreation()">Create Genome</button>
          <button class="action-button" onclick="simulateGenomeExecution()">Execute Genome</button>
          <button class="action-button" onclick="simulateLongGenome()">Create Long Genome (100+)</button>
          <button class="action-button" onclick="simulateMutation()">Apply Mutation</button>
        </div>
      </div>

      <div class="action-section">
        <div class="section-title">üé® Drawing Activities</div>
        <div class="action-grid">
          <button class="action-button secondary" onclick="simulateAllShapes()">Use All Shapes</button>
          <button class="action-button secondary" onclick="simulateColorUsage()">Use Colors (10x)</button>
          <button class="action-button secondary" onclick="simulateTransforms()">Apply Transforms</button>
          <button class="action-button secondary" onclick="simulateMadScientist()">100 Mutations!</button>
        </div>
      </div>

      <div class="action-section">
        <div class="section-title">üéØ Assessment Activities</div>
        <div class="action-grid">
          <button class="action-button success" onclick="simulateCorrectChallenge()">Complete Challenge (Correct)</button>
          <button class="action-button success" onclick="simulateAllMutationTypes()">Identify All Types</button>
          <button class="action-button success" onclick="simulateFlawless()">10 Consecutive Correct</button>
          <button class="action-button success" onclick="simulatePerfectScore()">Perfect Score</button>
        </div>
      </div>

      <div class="action-section">
        <div class="section-title">üî¨ Advanced Activities</div>
        <div class="action-grid">
          <button class="action-button warning" onclick="simulateEvolution()">Run Evolution (50 gen)</button>
          <button class="action-button warning" onclick="simulateAudioSynthesis()">Try Audio Synthesis</button>
          <button class="action-button warning" onclick="simulateTimeline()">Use Timeline</button>
          <button class="action-button warning" onclick="simulateProfessor()">Become Professor (50 @ 95%)</button>
        </div>
      </div>

      <div class="info-box">
        <h4>‚ÑπÔ∏è How It Works</h4>
        <p>The achievement system tracks student progress across 16 achievements in 4 categories:</p>
        <p>‚Ä¢ <strong>Basics</strong> (üå±): Onboarding achievements for first-time users</p>
        <p>‚Ä¢ <strong>Mastery</strong> (üéØ): Skill development achievements for learning mutation types</p>
        <p>‚Ä¢ <strong>Exploration</strong> (üîç): Discovery achievements for trying different features</p>
        <p>‚Ä¢ <strong>Perfection</strong> (üíé): Excellence achievements for advanced users</p>
        <p style="margin-top: 15px;"><strong>Progress persists</strong> in localStorage - try refreshing the page!</p>
      </div>

      <button class="reset-button" onclick="resetProgress()">üîÑ Reset All Progress</button>
    </div>

    <div id="achievements-container" class="content-card"></div>
  </div>

  <script type="module">
    import { AchievementEngine } from './dist/achievement-engine.js';
    import { AchievementUI } from './dist/achievement-ui.js';

    // Initialize achievement system
    const engine = new AchievementEngine();
    const ui = new AchievementUI(engine, 'achievements-container');

    // Make engine and ui available globally
    window.achievementEngine = engine;
    window.achievementUI = ui;

    // Simulation functions
    window.simulateGenomeCreation = () => {
      const unlocked = engine.trackGenomeCreated(15);
      ui.handleUnlocks(unlocked);
      console.log('Created genome with 15 codons');
    };

    window.simulateGenomeExecution = () => {
      const unlocked = engine.trackGenomeExecuted(['CIRCLE', 'RECT', 'LINE']);
      ui.handleUnlocks(unlocked);
      console.log('Executed genome with 3 opcodes');
    };

    window.simulateLongGenome = () => {
      const unlocked = engine.trackGenomeCreated(101);
      engine.trackGenomeExecuted(['CIRCLE']);
      ui.handleUnlocks(unlocked);
      console.log('Created and executed long genome (101 codons)');
    };

    window.simulateMutation = () => {
      const unlocked = engine.trackMutationApplied();
      ui.handleUnlocks(unlocked);
      console.log('Applied mutation');
    };

    window.simulateAllShapes = () => {
      const shapes = ['CIRCLE', 'RECT', 'LINE', 'TRIANGLE', 'ELLIPSE'];
      let allUnlocked = [];
      shapes.forEach(shape => {
        const unlocked = engine.trackShapeDrawn(shape);
        allUnlocked.push(...unlocked);
      });
      ui.handleUnlocks(allUnlocked);
      console.log('Used all 5 shape opcodes');
    };

    window.simulateColorUsage = () => {
      let allUnlocked = [];
      for (let i = 0; i < 10; i++) {
        const unlocked = engine.trackColorUsed();
        allUnlocked.push(...unlocked);
      }
      ui.handleUnlocks(allUnlocked);
      console.log('Used COLOR opcode 10 times');
    };

    window.simulateTransforms = () => {
      const unlocked = engine.trackTransformApplied('ROTATE');
      ui.handleUnlocks(unlocked);
      console.log('Applied transform');
    };

    window.simulateMadScientist = () => {
      let allUnlocked = [];
      for (let i = 0; i < 100; i++) {
        const unlocked = engine.trackMutationApplied();
        allUnlocked.push(...unlocked);
      }
      ui.handleUnlocks(allUnlocked);
      console.log('Applied 100 mutations!');
    };

    window.simulateCorrectChallenge = () => {
      const types = ['silent', 'missense', 'nonsense', 'frameshift', 'insertion', 'deletion'];
      const randomType = types[Math.floor(Math.random() * types.length)];
      const unlocked = engine.trackChallengeCompleted(true, randomType);
      ui.handleUnlocks(unlocked);
      console.log(`Completed challenge (${randomType}) correctly`);
    };

    window.simulateAllMutationTypes = () => {
      const types = ['silent', 'missense', 'nonsense', 'frameshift', 'insertion', 'deletion'];
      let allUnlocked = [];
      types.forEach(type => {
        const unlocked = engine.trackChallengeCompleted(true, type);
        allUnlocked.push(...unlocked);
      });
      ui.handleUnlocks(allUnlocked);
      console.log('Identified all 6 mutation types');
    };

    window.simulateFlawless = () => {
      let allUnlocked = [];
      for (let i = 0; i < 10; i++) {
        const unlocked = engine.trackChallengeCompleted(true, 'silent');
        allUnlocked.push(...unlocked);
      }
      ui.handleUnlocks(allUnlocked);
      console.log('10 consecutive correct challenges');
    };

    window.simulatePerfectScore = () => {
      const unlocked = engine.trackPerfectScore();
      ui.handleUnlocks(unlocked);
      console.log('Perfect score achieved!');
    };

    window.simulateEvolution = () => {
      let allUnlocked = [];
      for (let i = 0; i < 50; i++) {
        const unlocked = engine.trackEvolutionGeneration();
        allUnlocked.push(...unlocked);
      }
      ui.handleUnlocks(allUnlocked);
      console.log('Ran 50 evolution generations');
    };

    window.simulateAudioSynthesis = () => {
      const unlocked = engine.trackAudioSynthesis();
      ui.handleUnlocks(unlocked);
      console.log('Used audio synthesis mode');
    };

    window.simulateTimeline = () => {
      const unlocked = engine.trackTimelineStepThrough();
      ui.handleUnlocks(unlocked);
      console.log('Used timeline step-through');
    };

    window.simulateProfessor = () => {
      let allUnlocked = [];
      // Complete 50 challenges with 48 correct (96% accuracy)
      for (let i = 0; i < 48; i++) {
        const unlocked = engine.trackChallengeCompleted(true, 'silent');
        allUnlocked.push(...unlocked);
      }
      for (let i = 0; i < 2; i++) {
        const unlocked = engine.trackChallengeCompleted(false, 'silent');
        allUnlocked.push(...unlocked);
      }
      ui.handleUnlocks(allUnlocked);
      console.log('Achieved Professor status (50+ challenges at 95%+)');
    };

    window.resetProgress = () => {
      if (confirm('Are you sure you want to reset all achievement progress?')) {
        engine.reset();
        ui.render();
        console.log('Achievement progress reset');
        alert('All progress has been reset!');
      }
    };

    console.log('üéÆ Achievement Demo Ready!');
    console.log('Try the buttons above to unlock achievements.');
    console.log('Check localStorage to see persistence working!');
  </script>
</body>
</html>
